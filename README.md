# 华科七边形招新题
## 使用的优化方法
### 减少函数调用的开销
观察到计算距离的函数要在达到最大迭代次数或者已经收敛前被调用了很多很多次，于是可以将其变为内联函数或者直接运算，不使用函数。
### 消除多余的内存分配和内存拷贝
- 对`p_cnt`的覆盖时每次都要创造一个点的实例，可能会占用更多时间，可以直接用一个点`p(0, 0)`进行覆盖。
- 由于最小距离被赋值为该类型的最大值，因此不用担心`assignment[i]`不被初始化，可以用一个临时变量`place`来存最小距离中心点的位置，最后再赋值给`assignment[i]`。如果像原始代码一样每次发现距离更小的中心点都赋值，就会造成运行速度的减慢。
### 消除多余的计算，合并多余的循环
- 有四个两两相似的`for`循环，发现相似的循环并没有独立存在的必要，可以直接进行合并对赋值和计算没有任何影响。
### 并行优化
- 可以通过多线程执行代码，充分发挥多核的作用。

## 困惑
- 对于`#pragma omp parallel for`还不明白原理，应该在何处使用全靠尝试，在后面的两个循环使用就会出现不一样的结果。
- 没有想到和用到**优化内存布局，增强代码的空间局部性**、**使用SIMD指令**两种优化方法。